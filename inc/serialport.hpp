#ifndef __SERIAL_PORT_HPP__
#define __SERIAL_PORT_HPP__

/******************************************************************************/

#include <QSerialPortInfo>
#include <QSerialPort>
#include <QString>

/******************************************************************************/

class SceneModifier;

/******************************************************************************/

class VirtualPort
    : public QObject
{

/******************************************************************************/

    Q_OBJECT

/******************************************************************************/

public:

/******************************************************************************/

    explicit VirtualPort( QObject* _parent );

    ~VirtualPort();

/******************************************************************************/

    void setModifier( SceneModifier* _modifier ) noexcept;

    void openComPort( QString _name, QString _speed );

/******************************************************************************/

private slots:

/******************************************************************************/

    void readData();

/******************************************************************************/

private:

/******************************************************************************/

    void connectReadEvent() noexcept;

    bool isUpdateNeeded( int _angleX, int _angleY ) noexcept;

/******************************************************************************/

    QSerialPort* m_hComPort;

    SceneModifier* m_pModifier;

/******************************************************************************/

}; // class VirtualPort

/******************************************************************************/

#endif // __SERIAL_PORT_HPP__
